['JP 5948518 B1 2016.7.6(57)
【特許請求の範囲】
【請求項１】第１蓄電部、前記第１蓄電部に流出入する電流を検出する第１電流センサ、および前記第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電を担う充放電回路、および前記充放電回路を制御する制御部を備える充放電回路モジュールとを含み、前記制御部は、前記第１蓄電部と前記第２蓄電部の間の充放電による蓄電部間の電力移動の前後におけ 10る前記第１蓄電部のＯＣＶと、前記電力移動の充放電量を用いて、前記第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を複数特定して、前記第１蓄電部のＳＯＣとＯＣＶの関係である第１相関情報を確定する段階で、特定された前記第１座標が、それまでに特定された複数の他の前記第１座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離する場合、前記第１蓄電部の故障状態を判断することを特徴とする蓄電装置。
【請求項２】前記第１蓄電部の確定された前記第１相関情報が存在する場合は、特定された前記第１座標が、前記第１相関情報で表わされる直線または曲線から予め定めた量を超えて乖離する場合に、前記第１蓄電部の故障と判断する請求項１に記載の蓄電装置。 20(2) JP 5948518 B1 2016.7.6
【請求項３】前記制御部は、複数の劣化状態における前記第１相関情報を予め記憶する記憶部を備え、前記制御部は、前記複数の劣化状態において同一のＳＯＣに対するＯＣＶの差分が閾値以下となるＳＯＣである基準ＳＯＣと、前記基準ＳＯＣに対応するＯＣＶである基準ＯＣＶとからなる座標が、少なくとも１つ含まれるように複数の前記第１座標を特定する請求項１または２に記載の蓄電装置。
【請求項４】前記制御部は、前記電力移動を行う前の前記第１蓄電部のＳＯＣが前記基準ＳＯＣの範囲に含まれない場合は、前記電力移動に先立ち、前記第１蓄電部のＳＯＣが前記基準ＳＯ 10Ｃの範囲に含まれるように、前記第１蓄電部と前記第２蓄電部の間で充放電を行う請求項３に記載の蓄電装置。
【請求項５】前記制御部は、前記電力移動を行う前の前記第１蓄電部のＯＣＶが前記基準ＯＣＶの範囲に含まれない場合は、前記電力移動に先立ち、前記第１蓄電部のＯＣＶが前記基準ＯＣＶの範囲に含まれるように、前記第１蓄電部と前記第２蓄電部の間で充放電を行う請求項３に記載の蓄電装置。
【請求項６】前記制御部は、複数の劣化状態における前記第１相関情報を予め記憶する記憶部を備え、 20前記制御部は、複数の前記第１座標との偏差が閾値以下となる前記記憶部に記憶された前記第１相関情報を選択して、前記第１相関情報を確定する請求項１から５のいずれか１項に記載の蓄電装置。
【請求項７】前記制御部は、複数の前記第１座標との偏差が最小となる前記記憶部に記憶された前記第１相関情報を、前記第１相関情報として確定する請求項６に記載の蓄電装置。
【請求項８】前記制御部は、複数の前記第１座標より形成される近似曲線または近似直線に基づき、前記第１相関情報を確定する請求項１から５のいずれか１項に記載の蓄電装置。
【請求項９】 30前記制御部は、前記第１座標を特定したときの前記第１蓄電部の充電量、または前記第１座標を特定したときの時刻の少なくとも一方を記憶しておき、新たに前記第１座標を特定した場合における充電量の積算量が予め定められた閾値を超えた場合、または新たに前記第１座標を特定した時刻が以前に特定された前記第１座標の時刻から予め定められた時間を超えた場合には、以前に特定した前記第１座標を除外する請求項１から８のいずれか１項に記載の蓄電装置。
【請求項１０】前記制御部は、複数回の前記電力移動を、前記第１蓄電部から前記第２蓄電部への放電と、前記第２蓄電部から前記第１蓄電部への放電を切替えて行う請求項１から９のいずれか１項に記載の蓄電装置。 40
【請求項１１】前記制御部は、前記第１蓄電部から前記第２蓄電部への放電と、前記第２蓄電部から前記第１蓄電部への放電を交互に切替えて行う請求項１０に記載の蓄電装置。
【請求項１２】前記第１蓄電部と前記第２蓄電部の少なくとも一方は、駆動部に電力を供給し、前記充放電回路は、前記第１蓄電部、前記第２蓄電部、および前記駆動部の間の充放電を担い、前記制御部は、前記電力移動を行う間は、前記第１蓄電部と前記第２蓄電部が、前記駆動部との間で充放電を行わないように前記充放電回路を制御する請求項１から１１のいずれか１項に記載の蓄電装置。 50(3) JP 5948518 B1 2016.7.6
【請求項１３】前記制御部は、第１蓄電部のＳＯＣの問合せを受けた場合に、前記第１蓄電部のＯＣＶと、確定した前記第１相関情報とに基づいて、前記第１蓄電部のＳＯＣを算出して応答する請求項１から１２のいずれか１項に記載の蓄電装置。
【請求項１４】前記第１蓄電部は前記第２蓄電部より単位重量あたりの出力電力である出力重量密度が大きく、前記第２蓄電部は前記第１蓄電部より単位重量あたりの貯蔵電力であるエネルギー重量密度が大きい請求項１から１３のいずれか１項に記載の蓄電装置。
【請求項１５】前記第２蓄電モジュールは、前記第２蓄電部に流出入する電流を検出する第２電流セン 10サ、および前記第２蓄電部の電圧を検出する第２電圧センサを備え、前記制御部は、前記電力移動の前後における前記第２蓄電部のＯＣＶと、前記電力移動の充放電量を用いて、前記第２蓄電部のＳＯＣとＯＣＶからなる二次元平面における第２座標を複数特定して、前記第２蓄電部のＳＯＣとＯＣＶの関係である第２相関情報を確定する段階で、特定された前記第２座標が、それまでに特定された他の前記第２座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離する場合に、前記第２蓄電部の故障状態を判断する請求項１４に記載の蓄電装置。
【請求項１６】前記制御部は、前記第１蓄電部の故障状態を判断した場合に、前記第１相関情報を確定 20させる処理を中断し、故障信号を送信する請求項１から１５の何れか一項に記載の蓄電装置。
【請求項１７】前記制御部は、前記電力移動を行う前において前記第１蓄電部のＳＯＣが、前記第１蓄電部の複数の劣化状態において同一のＳＯＣに対するＯＣＶの差分が閾値以下となるＳＯＣである基準ＳＯＣの範囲に含まれているときからの前記第１蓄電部への電流値の総和と、前記電力移動を行う前において前記基準ＳＯＣの範囲に含まれている前記第１蓄電部のＳＯＣとに基づいて、前記電力移動の後における前記第１蓄電部のＳＯＣを算出する請求項１から１６の何れか一項に記載の蓄電装置。
【請求項１８】 30第１蓄電部、前記第１蓄電部に流出入する電流を検出する第１電流センサ、および前記第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電を担う充放電回路、および前記充放電回路を制御する制御部を備える充放電回路モジュールとを含み、前記制御部は、前記第１蓄電部と前記第２蓄電部の間の充放電による蓄電部間の電力移動の前後における前記第１蓄電部のＯＣＶと、前記電力移動の充放電量を用いて、前記第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を複数特定して、前記第１蓄電部のＳＯ 40ＣとＯＣＶの関係である第１相関情報を確定する段階で、特定された前記第１座標が、それまでに特定された他の前記第１座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離する場合、前記第１蓄電部の故障状態を判断し、前記制御部は、前記電力移動を行う前の前記第１蓄電部のＳＯＣが、前記第１蓄電部の複数の劣化状態において同一のＳＯＣに対するＯＣＶの差分が閾値以下となるＳＯＣである基準ＳＯＣの範囲に含まれない場合は、前記電力移動に先立ち、前記第１蓄電部のＳＯＣが前記基準ＳＯＣの範囲に含まれるように、前記第１蓄電部と前記第２蓄電部の間で充放電を行う蓄電装置。
【請求項１９】 50(4) JP 5948518 B1 2016.7.6第１蓄電部、前記第１蓄電部に流出入する電流を検出する第１電流センサ、および前記第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電を担う充放電回路、および前記充放電回路を制御する制御部を備える充放電回路モジュールとを含み、前記制御部は、前記第１蓄電部と前記第２蓄電部の間の充放電による蓄電部間の電力移動の前後における前記第１蓄電部のＯＣＶと、前記電力移動の充放電量を用いて、前記第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を複数特定して、前記第１蓄電部のＳＯ 10ＣとＯＣＶの関係である第１相関情報を確定する段階で、特定された前記第１座標が、それまでに特定された他の前記第１座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離する場合、前記第１蓄電部の故障状態を判断し、前記制御部は、前記電力移動を行う前の前記第１蓄電部のＯＣＶが、前記第１蓄電部の複数の劣化状態において同一のＳＯＣに対するＯＣＶの差分が閾値以下となるＳＯＣに対応するＯＣＶである基準ＯＣＶの範囲に含まれない場合は、前記電力移動に先立ち、前記第１蓄電部のＯＣＶが前記基準ＯＣＶの範囲に含まれるように、前記第１蓄電部と前記第２蓄電部の間で充放電を行う蓄電装置。
【請求項２０】 20第１蓄電部、前記第１蓄電部に流出入する電流を検出する第１電流センサ、および前記第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電を担う充放電回路、および前記充放電回路を制御する制御部を備える充放電回路モジュールとを含み、前記制御部は、前記第１蓄電部と前記第２蓄電部の間の充放電による蓄電部間の電力移動の前後における前記第１蓄電部のＯＣＶと、前記電力移動の充放電量を用いて、前記第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を複数特定して、前記第１蓄電部のＳＯ 30ＣとＯＣＶの関係である第１相関情報を確定する段階で、特定された前記第１座標が、それまでに特定された他の前記第１座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離する場合、前記第１蓄電部の故障状態を判断し、前記制御部は、複数回の前記電力移動を、前記第１蓄電部から前記第２蓄電部への放電と、前記第２蓄電部から前記第１蓄電部への放電を交互に切替えて行う蓄電装置。
【請求項２１】請求項１から２０の何れか一項に記載の蓄電装置を有する輸送機器。
【請求項２２】第１蓄電部、前記第１蓄電部に流出入する電流を検出する第１電流センサ、および前記 40第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電を担う充放電回路、および前記充放電回路を制御する制御部を備える充放電回路モジュールとを有する蓄電装置における故障判断方法であって、前記第１蓄電部と前記第２蓄電部の間で充放電を行う電力移動ステップと、前記第１蓄電部のＯＣＶと、前記充放電における充放電量とに基づき、前記第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を特定するプロットステップと、前記電力移動ステップと前記プロットステップを複数回繰り返して特定される複数の前記第１座標に基づき、前記第１蓄電部のＳＯＣとＯＣＶの関係である第１相関情報を確定 50(5) JP 5948518 B1 2016.7.6する確定ステップと、前記確定ステップの処理中において、特定された前記第１座標が、それまでに特定された複数の他の前記第１座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離することを検出した場合、前記第１蓄電部の故障状態を判断する判断ステップとを含む故障判断方法。
【請求項２３】第１蓄電部、前記第１蓄電部に流出入する電流を検出する第１電流センサ、および前記第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、 10前記第１蓄電部と前記第２蓄電部の間の充放電を担う充放電回路、および前記充放電回路を制御する制御部を備える充放電回路モジュールとを有する蓄電装置における故障判断方法であって、前記第１蓄電部と前記第２蓄電部の間で充放電を行う電力移動ステップと、前記第１蓄電部のＯＣＶと、前記充放電における充放電量とに基づき、前記第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を特定するプロットステップと、前記電力移動ステップと前記プロットステップを複数回繰り返して特定される複数の前記第１座標に基づき、前記第１蓄電部のＳＯＣとＯＣＶの関係である第１相関情報を確定する確定ステップと、前記確定ステップの処理中において、特定された前記第１座標が、それまでに特定され 20た他の前記第１座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離することを検出した場合、前記第１蓄電部の故障状態を判断する判断ステップとを含み、前記故障判断方法は、前記第１蓄電部のＳＯＣが、前記第１蓄電部の複数の劣化状態において同一のＳＯＣに対するＯＣＶの差分が閾値以下となるＳＯＣである基準ＳＯＣの範囲に含まれない場合は、前記電力移動ステップに先立ち、前記第１蓄電部のＳＯＣが前記基準ＳＯＣの範囲に含まれるように、前記第１蓄電部と前記第２蓄電部の間で充放電を行うステップをさらに含む故障判断方法。 30
【請求項２４】第１蓄電部、前記第１蓄電部に流出入する電流を検出する第１電流センサ、および前記第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電を担う充放電回路、および前記充放電回路を制御する制御部を備える充放電回路モジュールとを有する蓄電装置における故障判断方法であって、前記第１蓄電部と前記第２蓄電部の間で充放電を行う電力移動ステップと、前記第１蓄電部のＯＣＶと、前記充放電における充放電量とに基づき、前記第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を特定するプロットステップと、 40前記電力移動ステップと前記プロットステップを複数回繰り返して特定される複数の前記第１座標に基づき、前記第１蓄電部のＳＯＣとＯＣＶの関係である第１相関情報を確定する確定ステップと、前記確定ステップの処理中において、特定された前記第１座標が、それまでに特定された他の前記第１座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離することを検出した場合、前記第１蓄電部の故障状態を判断する判断ステップとを含み、前記故障判断方法は、前記電力移動を行う前の前記第１蓄電部のＯＣＶが、前記第１蓄電部の複数の劣化状態において同一のＳＯＣに対するＯＣＶの差分が閾値以下となるＳＯＣに対応するＯＣＶで 50(6) JP 5948518 B1 2016.7.6ある基準ＯＣＶの範囲に含まれない場合は、前記電力移動ステップに先立ち、前記第１蓄電部のＯＣＶが前記基準ＯＣＶの範囲に含まれるように、前記第１蓄電部と前記第２蓄電部の間で充放電を行うステップをさらに含む故障判断方法。
【請求項２５】第１蓄電部、前記第１蓄電部に流出入する電流を検出する第１電流センサ、および前記第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電を担う充放電回路、および前記充放電回 10路を制御する制御部を備える充放電回路モジュールとを有する蓄電装置における故障判断方法であって、前記第１蓄電部と前記第２蓄電部の間で充放電を行う電力移動ステップと、前記第１蓄電部のＯＣＶと、前記充放電における充放電量とに基づき、前記第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を特定するプロットステップと、前記電力移動ステップと前記プロットステップを複数回繰り返して特定される複数の前記第１座標に基づき、前記第１蓄電部のＳＯＣとＯＣＶの関係である第１相関情報を確定する確定ステップと、前記確定ステップの処理中において、特定された前記第１座標が、それまでに特定された他の前記第１座標によって形成される近似曲線または近似直線から予め定めた量を超え 20て乖離することを検出した場合、前記第１蓄電部の故障状態を判断する判断ステップとを含み、複数回の前記電力移動ステップにおいて、前記第１蓄電部から前記第２蓄電部への放電と、前記第２蓄電部から前記第１蓄電部への放電を交互に切替えて行う故障判断方法。
【請求項２６】第１蓄電部、前記第１蓄電部に流出入する電流を検出する第１電流センサ、および前記第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電を担う充放電回路、および前記充放電回 30路を制御する制御部を備える充放電回路モジュールとを有する蓄電装置における故障判断プログラムであって、前記第１蓄電部と前記第２蓄電部の間で充放電を行う電力移動ステップと、前記第１蓄電部のＯＣＶと、前記充放電における充放電量とに基づき、前記第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を特定するプロットステップと、前記電力移動ステップと前記プロットステップを複数回繰り返して特定される複数の前記第１座標に基づき、前記第１蓄電部のＳＯＣとＯＣＶの関係である第１相関情報を確定する確定ステップと、前記確定ステップの処理中において、特定された前記第１座標が、それまでに特定された複数の他の前記第１座標によって形成される近似曲線または近似直線から予め定めた量 40を超えて乖離することを検出した場合、前記第１蓄電部の故障状態を判断する判断ステップとをコンピュータに実行させる故障判断プログラム。
【請求項２７】第１蓄電部、前記第１蓄電部に流出入する電流を検出する第１電流センサ、および前記第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電を担う充放電回路、および前記充放電回路を制御する制御部を備える充放電回路モジュールとを有する蓄電装置における故障判断プログラムであって、 50(7) JP 5948518 B1 2016.7.6前記第１蓄電部と前記第２蓄電部の間で充放電を行う電力移動ステップと、前記第１蓄電部のＯＣＶと、前記充放電における充放電量とに基づき、前記第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を特定するプロットステップと、前記電力移動ステップと前記プロットステップを複数回繰り返して特定される複数の前記第１座標に基づき、前記第１蓄電部のＳＯＣとＯＣＶの関係である第１相関情報を確定する確定ステップと、前記確定ステップの処理中において、特定された前記第１座標が、それまでに特定された他の前記第１座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離することを検出した場合、前記第１蓄電部の故障状態を判断する判断ステップとをコンピュータに実行させ、 10前記故障判断プログラムは、前記第１蓄電部のＳＯＣが、前記第１蓄電部の複数の劣化状態において同一のＳＯＣに対するＯＣＶの差分が閾値以下となるＳＯＣである基準ＳＯＣの範囲に含まれない場合は、前記電力移動ステップに先立ち、前記第１蓄電部のＳＯＣが前記基準ＳＯＣの範囲に含まれるように、前記第１蓄電部と前記第２蓄電部の間で充放電を行うステップを前記コンピュータにさらに実行させる故障判断プログラム。
【請求項２８】第１蓄電部、前記第１蓄電部に流出入する電流を検出する第１電流センサ、および前記第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、 20第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電を担う充放電回路、および前記充放電回路を制御する制御部を備える充放電回路モジュールとを有する蓄電装置における故障判断プログラムであって、前記第１蓄電部と前記第２蓄電部の間で充放電を行う電力移動ステップと、前記第１蓄電部のＯＣＶと、前記充放電における充放電量とに基づき、前記第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を特定するプロットステップと、前記電力移動ステップと前記プロットステップを複数回繰り返して特定される複数の前記第１座標に基づき、前記第１蓄電部のＳＯＣとＯＣＶの関係である第１相関情報を確定する確定ステップと、 30前記確定ステップの処理中において、特定された前記第１座標が、それまでに特定された他の前記第１座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離することを検出した場合、前記第１蓄電部の故障状態を判断する判断ステップとをコンピュータに実行させ、前記故障判断プログラムは、前記電力移動を行う前の前記第１蓄電部のＯＣＶが、前記第１蓄電部の複数の劣化状態において同一のＳＯＣに対するＯＣＶの差分が閾値以下となるＳＯＣに対応するＯＣＶである基準ＯＣＶの範囲に含まれない場合は、前記電力移動ステップに先立ち、前記第１蓄電部のＯＣＶが前記基準ＯＣＶの範囲に含まれるように、前記第１蓄電部と前記第２蓄電部の間で充放電を行うステップ 40を前記コンピュータにさらに実行させる故障判断プログラム。
【請求項２９】第１蓄電部、前記第１蓄電部に流出入する電流を検出する第１電流センサ、および前記第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電を担う充放電回路、および前記充放電回路を制御する制御部を備える充放電回路モジュールとを有する蓄電装置における故障判断プログラムであって、前記第１蓄電部と前記第２蓄電部の間で充放電を行う電力移動ステップと、 50(8) JP 5948518 B1 2016.7.6前記第１蓄電部のＯＣＶと、前記充放電における充放電量とに基づき、前記第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を特定するプロットステップと、前記電力移動ステップと前記プロットステップを複数回繰り返して特定される複数の前記第１座標に基づき、前記第１蓄電部のＳＯＣとＯＣＶの関係である第１相関情報を確定する確定ステップと、前記確定ステップの処理中において、特定された前記第１座標が、それまでに特定された他の前記第１座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離することを検出した場合、前記第１蓄電部の故障状態を判断する判断ステップとをコンピュータに実行させ、前記故障判断プログラムは、 10複数回の前記電力移動ステップにおいて、前記第１蓄電部から前記第２蓄電部への放電と、前記第２蓄電部から前記第１蓄電部への放電とを交互に切替えて前記コンピュータに実行させる故障判断プログラム。
【請求項３０】第１蓄電部を備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電による蓄電部間の電力移動を行う充放電回路モジュールとを含み、 20前記充放電回路モジュールは、前記第１蓄電部におけるＯＣＶ値とＳＯＣ値の組を表わす第１データを、前記電力移動を繰り返して複数個取得し、取得された複数個の前記第１データに基づいて前記第１蓄電部のＳＯＣとＯＣＶの関係を表わす第１相関情報を確定する段階で、特定された前記第１データが、それまでに特定された複数の他の前記第１データから得られる相関関係から逸脱すると判断する場合、前記第１蓄電部の故障を推定する蓄電装置。
【請求項３１】第１蓄電部を備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電による蓄電部間の電力移動を行う充放電 30回路モジュールとを含み、前記充放電回路モジュールは、前記第１蓄電部におけるＯＣＶ値とＳＯＣ値の組を表わす第１データを、前記電力移動を繰り返して複数個取得し、取得された複数個の前記第１データに基づいて前記第１蓄電部のＳＯＣとＯＣＶの関係を表わす第１相関情報を確定する段階で、特定された前記第１データが、それまでに特定された他の前記第１データから得られる相関関係から逸脱すると判断する場合、前記第１蓄電部の故障を推定し、前記充放電回路モジュールは、前記電力移動を行う前の前記第１蓄電部のＳＯＣが、前記第１蓄電部の複数の劣化状態において同一のＳＯＣに対するＯＣＶの差分が閾値以下となるＳＯＣである基準ＳＯＣの範囲に含まれない場合は、前記電力移動に先立ち、前記第 40１蓄電部のＳＯＣが前記基準ＳＯＣの範囲に含まれるように、前記第１蓄電部と前記第２蓄電部の間で充放電を行う蓄電装置。
【請求項３２】第１蓄電部を備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電による蓄電部間の電力移動を行う充放電回路モジュールとを含み、前記充放電回路モジュールは、前記第１蓄電部におけるＯＣＶ値とＳＯＣ値の組を表わ 50(9) JP 5948518 B1 2016.7.6す第１データを、前記電力移動を繰り返して複数個取得し、取得された複数個の前記第１データに基づいて前記第１蓄電部のＳＯＣとＯＣＶの関係を表わす第１相関情報を確定する段階で、特定された前記第１データが、それまでに特定された他の前記第１データから得られる相関関係から逸脱すると判断する場合、前記第１蓄電部の故障を推定し、前記充放電回路モジュールは、前記電力移動を行う前の前記第１蓄電部のＯＣＶが、前記第１蓄電部の複数の劣化状態において同一のＳＯＣに対するＯＣＶの差分が閾値以下となるＳＯＣに対応するＯＣＶである基準ＯＣＶの範囲に含まれない場合は、前記電力移動に先立ち、前記第１蓄電部のＯＣＶが前記基準ＯＣＶの範囲に含まれるように、前記第１蓄電部と前記第２蓄電部の間で充放電を行う蓄電装置。 10
【請求項３３】第１蓄電部を備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、前記第１蓄電部と前記第２蓄電部の間の充放電による蓄電部間の電力移動を行う充放電回路モジュールとを含み、前記充放電回路モジュールは、前記第１蓄電部におけるＯＣＶ値とＳＯＣ値の組を表わす第１データを、前記電力移動を繰り返して複数個取得し、取得された複数個の前記第１データに基づいて前記第１蓄電部のＳＯＣとＯＣＶの関係を表わす第１相関情報を確定する段階で、特定された前記第１データが、それまでに特定された他の前記第１データから 20得られる相関関係から逸脱すると判断する場合、前記第１蓄電部の故障を推定し、前記充放電回路モジュールは、複数回の前記電力移動を、前記第１蓄電部から前記第２蓄電部への放電と、前記第２蓄電部から前記第１蓄電部への放電を交互に切替えて行う蓄電装置。
【発明の詳細な説明】
【技術分野】
【０００１】本発明は、蓄電装置、該蓄電装置を有する輸送機器、故障診断方法、および故障診断プログラムに関する。
【背景技術】 30
【０００２】複数の蓄電池を備えるシステムにおいて、その蓄電池間で充放電を行うことにより、開放端電圧に対する残容量の関係を把握する技術が知られている。［先行技術文献］［特許文献］［特許文献１］特開２００８―２２００８０号公報
【発明の概要】
【発明が解決しようとする課題】
【０００３】蓄電池が故障すると、例えば当該蓄電池が輸送機器に利用されているような場合には、 40装置全体にフェールセーフアクションが必要となるような影響を与える。したがって、蓄電池の故障は、いち早く認識される必要がある。
【課題を解決するための手段】
【０００４】本発明の第１の態様における蓄電装置は、第１蓄電部、第１蓄電部に流出入する電流を検出する第１電流センサ、および第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、第１蓄電部と第２蓄電部の間の充放電を担う充放電回路、および充放電回路を制御する制御部を備える充放電回路モジュールとを含み、制御部は、第１蓄電部と第２蓄電部の間の充放電による蓄電部間の電力移動の前後における第１蓄電部のＯＣＶと、電力移動の充放電量を用いて、第１蓄 50(10) JP 5948518 B1 2016.7.6電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を複数特定して、第１蓄電部のＳＯＣとＯＣＶの関係である第１相関情報を確定する段階で、特定された第１座標が、それまでに特定された他の第１座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離する場合、第１蓄電部の故障状態を診断することを特徴とする。
【０００５】本発明の第２の態様における輸送機器は、上記の蓄電装置を有する。
【０００６】本発明の第３の態様における故障診断方法は、第１蓄電部、第１蓄電部に流出入する電流を検出する第１電流センサ、および第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、第１蓄電部と第２ 10蓄電部の間の充放電を担う充放電回路、および充放電回路を制御する制御部を備える充放電回路モジュールとを有する蓄電装置における故障診断方法であって、第１蓄電部と第２蓄電部の間で充放電を行う電力移動ステップと、第１蓄電部のＯＣＶと、充放電における充放電量とに基づき、第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を特定するプロットステップと、電力移動ステップとプロットステップを複数回繰り返して特定される複数の第１座標に基づき、第１蓄電部のＳＯＣとＯＣＶの関係である第１相関情報を確定する確定ステップと、確定ステップの処理中において、特定された第１座標が、それまでに特定された他の第１座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離することを検出した場合、第１蓄電部の故障状態を診断する診断ステップとを含む。 20
【０００７】本発明の第４の態様における故障診断プログラムは、第１蓄電部、第１蓄電部に流出入する電流を検出する第１電流センサ、および第１蓄電部の電圧を検出する第１電圧センサを備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、第１蓄電部と第２蓄電部の間の充放電を担う充放電回路、および充放電回路を制御する制御部を備える充放電回路モジュールとを有する蓄電装置における故障診断プログラムであって、第１蓄電部と第２蓄電部の間で充放電を行う電力移動ステップと、第１蓄電部のＯＣＶと、充放電における充放電量とに基づき、第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における第１座標を特定するプロットステップと、電力移動ステップとプロットステップを複数回繰り返して特定される複数の第１座標に基づき、第１蓄電部のＳＯＣとＯＣＶの関係 30である第１相関情報を確定する確定ステップと、確定ステップの処理中において、特定された第１座標が、それまでに特定された他の第１座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離することを検出した場合、第１蓄電部の故障状態を診断する診断ステップとをコンピュータに実行させる。
【０００８】本発明の第５の態様における蓄電装置は、第１蓄電部を備える第１蓄電モジュールと、第２蓄電部を備える第２蓄電モジュールと、第１蓄電部と第２蓄電部の間の充放電による蓄電部間の電力移動を行う充放電回路モジュールとを含み、充放電回路モジュールは、第１蓄電部におけるＯＣＶ値とＳＯＣ値の組を表わす第１データを、電力移動を繰り返して複数個取得し、取得された複数個の第１データに基づいて第１蓄電部のＳＯＣとＯＣＶの 40関係を表わす第１相関情報を確定する段階で、特定された第１データが、それまでに特定された他の第１データから得られる相関関係から逸脱すると判断する場合、第１蓄電部の故障を推定する。
【０００９】なお、上記の発明の概要は、本発明の必要な特徴の全てを列挙したものではない。また、これらの特徴群のサブコンビネーションもまた、発明となりうる。
【図面の簡単な説明】
【００１０】
【図１】本実施形態に係る輸送機器の要部ブロック図である。
【図２】単一の蓄電池を用いた場合による電力出力と、２つの蓄電池を用いた場合による 50(11) JP 5948518 B1 2016.7.6電力出力とを比較するための図である。
【図３】蓄電池のＳＯＣ−ＯＣＶカーブを説明する図である。
【図４】ＳＯＣ−ＯＣＶカーブを確定するまでの手順を説明する図である。
【図５】平面空間上で座標を確定させるための演算を説明する図である。
【図６】座標のプロット順を説明するための図である。
【図７】電池ＥＣＵの内部ブロック図である。
【図８】ＳＯＣ−ＯＣＶカーブを確定させるまでのフロー図である。
【図９】故障検知の概念を説明する図である。
【図１０】故障検知のフロー図である。
【発明を実施するための形態】 10
【００１１】以下、発明の実施の形態を通じて本発明を説明するが、以下の実施形態は特許請求の範囲にかかる発明を限定するものではない。また、実施形態の中で説明されている特徴の組み合わせの全てが発明の解決手段に必須であるとは限らない。
【００１２】図１は、本実施形態に係る輸送機器１０の要部ブロック図である。本実施形態に係る輸送機器は、例えば電動自動車である。以下においては、本実施形態に係る蓄電装置１００が電動自動車に搭載されて利用される場合を想定して説明する。
【００１３】輸送機器１０は、搭載された蓄電装置１００から供給される駆動電力をパワードライブ 20ユニットであるＰＤＵ１４１が受け、ＰＤＵ１４１がモータジェネレータＭＧを回転駆動させることにより走行する。
【００１４】ＰＤＵ１４１は、蓄電装置１００と、主正母線ＭＰＬおよび主負母線ＭＮＬとで接続されている。平滑コンデンサＣは、主正母線ＭＰＬと主負母線ＭＮＬとの間に接続されており、導通する電力の高周波成分を低減する。第３電圧センサ１４２は、主正母線ＭＰＬと主負母線ＭＮＬとの間の電圧Ｖｈを検出し、検出された電圧Ｖｈは、ＰＤＵ１４１の制御に利用される。
【００１５】ＰＤＵ１４１は、主正母線ＭＰＬおよび主負母線ＭＮＬから供給される駆動電力（直流 30電力）を交流電力に変換してモータジェネレータＭＧへ出力する。モータジェネレータＭＧは、例えば、三相交流回転電機から成る。モータジェネレータＭＧは、動力伝達機構および駆動軸を介して車輪を回転させる。また、ＰＤＵ１４１は、車輪の減速時においてモータジェネレータＭＧが発電する交流電力を直流電力に変換し、回生電力として主正母線ＭＰＬおよび主負母線ＭＮＬへ出力する。
【００１６】蓄電装置１００が備える第１蓄電池１１１および第２蓄電池１２１は、モータジェネレータが発電する回生電力と、外部電源１５３からの外部電力とによって充電される。
【００１７】充電コンバータ１５１は、主正母線ＭＰＬおよび主負母線ＭＮＬと受電部１５２との間 40に設けられる。そして、充電コンバータ１５１は、受電部１５２を介して外部電源１５３（例えば家庭用ＡＣ電源）から供給される交流電力を直流電力に変換して主正母線ＭＰＬおよび主負母線ＭＮＬへ出力する。受電部１５２は、外部電源１５３から供給される交流電力を入力するための入力端子である。なお、充電コンバータ１５１は、主正母線ＭＰＬおよび主負母線ＭＮＬに代えて、あるいは追加して、正極線ＰＬ１および負極線ＮＬ１に接続されていても良く、正極線ＰＬ２および負極線ＮＬ２に接続されていても良い。
【００１８】蓄電装置１００は、第１蓄電モジュール１０１、第２蓄電モジュール１０２および充放電回路モジュール１０３を含む。第１蓄電モジュール１０１は、第１蓄電池１１１、第１電圧センサ１１２、第１電流センサ１１３、および第１スイッチ１１４を有する。第２蓄 50(12) JP 5948518 B1 2016.7.6電モジュール１０２は、第１蓄電モジュール１０１と同様の構成であり、第２蓄電池１２１、第２電圧センサ１２２、第２電流センサ１２３、および第２スイッチ１２４を有する。充放電回路モジュール１０３は、制御部としての電池ＥＣＵ１３０と、充放電回路として機能しうる第１ＶＣＵ１３１、第２ＶＣＵ１３２、および第３スイッチ１３３とを有する。
【００１９】本実施形態において第１蓄電部として機能する第１蓄電池１１１、および第２蓄電部として機能する第２蓄電池１２１は、充放電可能な直流電源であり、たとえば、リチウムイオン電池やニッケル水素電池、ナトリウムイオン電池、リチウム硫黄電池などの二次電池から成る。他にも、コンデンサ、キャパシタなどの充放電が可能な素子であっても良い。 10ただし、第１蓄電池１１１と第２蓄電池１２１は、互いに特性が異なる電池である。具体的には、第１蓄電池１１１は第２蓄電池１２１より単位重量あたりの出力電力である出力重量密度が大きい、いわゆる高出力型バッテリである。一方、第２蓄電池１２１は第１蓄電池１１１より単位重量あたりの貯蔵電力であるエネルギー重量密度が大きい、いわゆる高容量型バッテリである。
【００２０】第１蓄電池１１１は、正極線ＰＬ１および負極線ＮＬ１を介して第１ＶＣＵ１３１に接続されている。第１電圧センサ１１２は、正極線ＰＬ１と負極線ＮＬ１との間の電圧すなわち第１蓄電池１１１の電圧Ｖ を検出し、その検出値を電池ＥＣＵ１３０へ出力する。１第１電流センサ１１３は、第１蓄電池１１１に対して入出力される電流Ｉ を検出し、そ 20１の検出値を電池ＥＣＵ１３０へ出力する。
【００２１】第１スイッチ１１４は、正極線ＰＬ１と負極線ＮＬ１の電路を開閉するスイッチであり、電池ＥＣＵ１３０からの開閉指示信号ＣＷ を受けて、開状態と閉状態を切り替える。１第１スイッチ１１４が開状態であるときに第１電圧センサ１１２によって検出されるＶ１は、第１蓄電池１１１におけるＯＣＶであるＯＣＶ となる。１
【００２２】第２蓄電池１２１は、正極線ＰＬ２および負極線ＮＬ２を介して第２ＶＣＵ１３２に接続されている。第２電圧センサ１２２は、正極線ＰＬ２と負極線ＮＬ２との間の電圧すなわち第２蓄電池１２１の電圧Ｖ を検出し、その検出値を電池ＥＣＵ１３０へ出力する。 30２第２電流センサ１２３は、第２蓄電池１２１に対して入出力される電流Ｉ を検出し、そ２の検出値を電池ＥＣＵ１３０へ出力する。
【００２３】第２スイッチ１２４は、正極線ＰＬ２と負極線ＮＬ２の電路を開閉するスイッチであり、電池ＥＣＵ１３０からの開閉指示信号ＣＷ を受けて、開状態と閉状態を切り替える。２第２スイッチ１２４が開状態であるときに第２電圧センサ１２２によって検出されるＶ２は、第２蓄電池１２１におけるＯＣＶであるＯＣＶ となる。２
【００２４】なお、第１電流センサ１１３および第２電流センサ１２３は、それぞれ対応する蓄電池から出力される電流（放電電流）を正値として検出し、入力される電流（充電電流および 40回生電流）を負値として検出する。図１では、それぞれ正極線の電流を検出する構成として示すが、負極線の電流を検出するように構成しても良い。
【００２５】第１ＶＣＵ１３１は、正極線ＰＬ１および負極線ＮＬ１と、接続正極線ＢＰＬおよび接続負極線ＢＮＬとの間に設けられ、電池ＥＣＵ１３０からの制御信号ＣＶ を受けて、正１極線ＰＬ１および負極線ＮＬ１と、接続正極線ＢＰＬおよび接続負極線ＢＮＬとの間で電圧変換を行う。第２ＶＣＵ１３２は、正極線ＰＬ２および負極線ＮＬ２と、接続正極線ＢＰＬおよび接続負極線ＢＮＬとの間に設けられ、電池ＥＣＵ１３０からの制御信号ＣＶ２を受けて、正極線ＰＬ２および負極線ＮＬ２と、接続正極線ＢＰＬおよび接続負極線ＢＮＬとの間で電圧変換を行う。 50(13) JP 5948518 B1 2016.7.6
【００２６】接続正極線ＢＰＬは、主正母線ＭＰＬと接続され、接続負極線ＢＮＬは、主負母線ＭＮＬに接続される。その接続部には、第３スイッチ１３３が設けられている。第３スイッチ１３３は、接続正極線ＢＰＬと主正母線ＭＰＬ、および接続負極線ＢＮＬと主負母線ＭＮＬの電路を開閉するスイッチであり、電池ＥＣＵ１３０からの開閉指示信号ＣＷ を受け３て、開状態と閉状態を切り替える。
【００２７】以上の構成においては、第１スイッチ１１４と第３スイッチ１３３を閉状態、第２スイッチ１２４を開状態とした場合には、第１蓄電池１１１の電力がＰＤＵ１４１へ供給される。また、第２スイッチ１２４と第３スイッチ１３３を閉状態、第１スイッチ１１４を開 10状態とした場合には、第２蓄電池１２１の電力がＰＤＵ１４１へ供給される。また、第１スイッチ１１４と第２スイッチ１２４と第３スイッチ１３３を閉状態とした場合には、第１蓄電池１１１の電力と第２蓄電池１２１の電力が共にＰＤＵ１４１へ供給される。ただし、第１蓄電池１１１の電力と第２蓄電池１２１の電力を共にＰＤＵ１４１へ供給する場合には、供給電圧が同じになるように、第１ＶＣＵ１３１および第２ＶＣＵ１３２によって電圧変換が成される。なお、ＰＤＵ１４１から回生電力が供給される場合、または外部電源１５３から外部電力が供給される場合には、電力の流れは上記の各場合における逆向きとなる。
【００２８】また、本実施形態においては、それぞれの蓄電池に電圧変換ユニットであるＶＣＵを設 20けるいわゆる２ＶＣＵ方式を採用するが、一方の蓄電池の出力電圧に対して他方の蓄電池の出力電圧を調整する観点からは、いずれかに一つのＶＣＵを設けるいわゆる１ＶＣＵ方式を採用しても良い。１ＶＣＵ方式であれば、ＶＣＵを設置するスペースの削減に寄与する。また、コストの削減、重量の削減にも寄与する。この場合には、ＰＤＵ１４１へ供給される電圧は、ＶＣＵが設けられない蓄電池の出力電圧となるが、この制約が不都合である場合には２ＶＣＵ方式を採用すれば良い。
【００２９】なお、コンバータは、大別すると昇圧型、降圧型、昇降圧型に分類されるが、第１ＶＣＵ１３１、第２ＶＣＵ１３２は、いずれの型のコンバータも採用し得る。また、第１ＶＣＵ１３１、第２ＶＣＵ１３２に採用するコンバータの型を異ならせても良い。第１ＢＡＴ 30Ｔ１１１および第２ＢＡＴＴ１２１とコンバータの型を適宜組み合わせることにより、要求仕様を満たす全体としてあたかも一つのバッテリとして利用することができる。
【００３０】第１スイッチ１１４と第２スイッチ１２４を閉状態、第３スイッチ１３３を開状態とした場合には、第１蓄電池１１１と第２蓄電池１２１の間で充放電が行われる。この蓄電池部間充放電は、電池ＥＣＵ１３０からの制御信号ＣＶ によって決定される第１ＶＣＵ１１３１の変換電圧値と、制御信号ＣＶ によって決定される第２ＶＣＵ１３２の変換電圧値２との差に応じて、電力の流れが定まる。したがって、電池ＥＣＵ１３０は、変換電圧値を指示する制御信号ＣＶ およびＣＶ をそれぞれのＶＣＵに送信することにより、どちら１ ２の蓄電池を電力の供給側とし、どちらの蓄電池を電力の受容側とするか制御することがで 40きる。なお、第１ＶＣＵ１３１と第２ＶＣＵ１３２の一方のハイサイドスイッチを「閉」かつローサイドスイッチを「開」に固定することで電圧変換を停止し、蓄電池の出力電圧をそのまま出力するいわゆる直結モードで制御して、他方の変換電圧値を変更するように制御しても良い。このとき、電池ＥＣＵ１３０は、Ｖ とＩ を監視すれば、第１蓄電池１ １１１１における充放電量を把握することができ、Ｖ とＩ を監視すれば、第２蓄電池１２ ２２１における充放電量を把握することができる。
【００３１】上記のように、本実施形態における蓄電装置１００は、互いに特性が異なる２つの蓄電池を備える。互いに特性が異なる複数の蓄電池を用いるシステムは、それぞれの蓄電池の特性や状態に応じて、要求される電力の供給に対してどのように応えるか、細かく制御す 50(14) JP 5948518 B1 2016.7.6る必要がある。そこでまず、単一の蓄電池を用いた場合による電力出力と、特性が異なる複数の蓄電池を用いた場合による電力出力の違いについて説明する。
【００３２】図２は、単一の蓄電池を用いた場合による電力出力と、特性が異なる２つの蓄電池を用いた場合による電力出力とを比較するための図である。横軸は時間経過を表わし、縦軸は電力出力を表わす。電力出力が負の領域は、例えば回生電力によって電力受容がなされることを表わす。
【００３３】実線で示されるＳＢは、蓄電装置が一つの蓄電池によって構成される場合の、出力電力の変化を表わす。蓄電装置が一つの蓄電池のみを備える場合には、負荷側から要求される 10電力をその能力の範囲において要求されるままに出力し、入力される電力をそのまま受け入れる。したがって、短時間で大きな出入力を行う場合もあり、蓄電池が急激に劣化するなどの問題もある。
【００３４】蓄電装置が特性の異なる２つの蓄電池によって構成される場合には、それぞれの特性に応じて出入力を分担することができる。点線で表わされるＯＢは、高出力型バッテリの出力電力の変化を表わし、二重線で表わされるＶＢは、高容量型バッテリの出力電力の変化を表わしている。各時間において、ＯＢの値とＶＢの値を足し合わせるとＳＢの値となる。すなわち、負荷側から要求される電力を、高容量型バッテリと高容量型バッテリで分担している様子を表わしている。 20
【００３５】一般的に高容量型バッテリは、高出入力および出入力の瞬間的な変動に対して劣化が進行するので、劣化の進行が抑制される範囲で出入力が行われるように制御されることが好ましい。したがって、ＯＢとＶＢの変化からわかるように、負荷側から大きな出入力が要求される場合には、原則として高出力型バッテリ（ＯＢ）が担い、高出力型バッテリでも応えられない場合に、高容量型バッテリ（ＶＢ）が補助する制御が行われる。また、高容量型バッテリは、あまり高くない値で継続的に出力する場合に適しており、この場合は、高出力型バッテリの出力は抑えられる。また、高容量型バッテリは高いレートの充電に相当する回生電力を受け入れた場合に劣化しやすいという特性を有するので、回生電力はできる限り高出力型バッテリで受け入れる制御が行われる。なお、回生電力が高出力型バッ 30テリで受け入れられる容量を上回る場合には、高容量型バッテリで受入れる以外に、ブレーキを動作させて回生電力の発生を低減しても良い。この場合、高容量型バッテリの劣化を抑制できる。
【００３６】また、高容量型バッテリと高出力型バッテリは、それぞれＳＯＣに基づく劣化影響度も大きく異なる。高容量型バッテリは、ＳＯＣが変動しても、劣化影響度が大きく変動することはない。換言すれば、ＳＯＣがいかなる値であっても劣化の進行に大きな影響を与えることはない。一方、高出力型バッテリは、ＳＯＣが変動すると、劣化影響度もその値に応じて大きく変動する。より詳述すると、ＳＯＣが３０〜７０％の中央域では、高出力型バッテリの劣化影響度は小さいが、この中央域から離れるに従って、劣化影響度は大きく 40なる。すなわち、中央域から離れるほど劣化が進む。したがって、高容量型バッテリのＳＯＣが、０〜３０％の低域や７０〜１００％の高域に属さないように、高容量型バッテリと高出力型バッテリの充放電量を調整することが好ましい。
【００３７】このように特性の異なる複数の蓄電池を利用することにより、それぞれの蓄電池の劣化を抑制しつつ、負荷側からのさまざまな出力要求に応えることができる。ただし、それぞれの蓄電池をどのように使い分け、どのような割合で出入力を混合させるかは、蓄電池の現在の状態を正確に把握して、その状態に応じて適宜変更、修正することが重要である。特に、刻々と変化するＳＯＣの正確な把握は、輸送機器の駆動制御に対して非常に重要である。 50(15) JP 5948518 B1 2016.7.6
【００３８】そこで、蓄電池におけるＳＯＣとＯＣＶとの相関関係について説明する。図３は、ある電池のＳＯＣ−ＯＣＶカーブを示すグラフである。ＳＯＣ−ＯＣＶカーブは、ＳＯＣとＯＣＶの関係である相関情報の一例である。横軸は、ＳＯＣをパーセント（％）で表わし、縦軸は、ＯＣＶをボルト（Ｖ）で表わす。
【００３９】グラフ上に描かれる複数のカーブは、それぞれ異なる容量維持率に対するＳＯＣ−ＯＣＶカーブを表わしている。容量維持率は、使用が繰り返されることによる劣化や、経時による劣化の程度を示しており、具体的には、新品時において貯蔵できる電力量（１００％）に対して、満充電でどれだけの電力量を貯蔵できるかをパーセントで表したものである 10。例えば、使用を繰り返したある時点において満充電まで充電した場合に、初期の貯蔵電力量に対して８０％の電力量しか貯蔵できなくなった蓄電池は、容量維持率８０％の蓄電池である。換言すれば容量維持率がその蓄電池の劣化度合いを示していると言える。
【００４０】図３において、実線は容量維持率１００％の、点線は９０％の、一点鎖線は８０％の、二点鎖線は７０％の、破線は６０％のＳＯＣ−ＯＣＶカーブを表わす。なお、ここでのＳＯＣは、劣化が進んだ状態における満充電の貯蔵電力量を１００％とした場合の充電率である。劣化が進行すると、カーブが全体的に左上方向に遷移する様子がわかる。例えば、ＯＣＶが３．９０Ｖである場合に、容量維持率が８０％の場合のＳＯＣは８０％であるのに対し、容量維持率が６０％の場合のＳＯＣは７０％であると読み取れる。多くの蓄電池 20が概してこのような傾向の性質を示すことが知られている。
【００４１】すなわち、蓄電装置が搭載する蓄電池が現時点においてどれくらい劣化が進行しているかにより、同じＯＣＶから推定されるＳＯＣが大きく異なってしまうことになる。つまり、ＯＣＶを測定しても、蓄電池の劣化状態の考慮なしには、正確にＳＯＣを把握できないことになる。
【００４２】そこで、本実施形態における蓄電装置１００は、搭載する第１蓄電池１１１および第２蓄電池１２１のそれぞれに対して、予め定められた条件を満たす時点ごとに、ＳＯＣ−ＯＣＶカーブを確定するための充放電制御を実行する。 30
【００４３】図４は、ある時点においてＳＯＣ−ＯＣＶカーブを確定するまでの手順を説明するための図である。図３と同じく、横軸は、ＳＯＣをパーセント（％）で表わし、縦軸は、ＯＣＶをボルト（Ｖ）で表わす。また、示されている複数のカーブはそれぞれ、図３で用いた線種に従って、モデル化された蓄電池の、各容量維持率に対するＳＯＣ−ＯＣＶカーブを表わす。
【００４４】出願人は、さまざまな蓄電池に対して検討を重ねた成果として、容量維持率が互いに異なるＳＯＣ−ＯＣＶカーブであっても、あるＯＣＶに対するＳＯＣのばらつきが一定の範囲に収まる領域が、多くの蓄電池において存在することを発見した。このような領域を「 40基準領域」と呼ぶこととする。基準領域は、例えば、ＳＯＣが１００％に近い範囲で見受けられる。これは、蓄電池の満充電電圧におけるＳＯＣを１００％として定義しているため、蓄電池の電圧を満充電電圧の近傍とすれば、容量維持率によらずＳＯＣは１００％の近傍となるからである。図４の例では、ＯＣＶがＶ の範囲（Ｏ ≦Ｖ ＜ＯＲ ｍｉｎ ０ ｍａｘ）において、いずれの容量維持率であっても、残容量がＳ （Ｓ ≦Ｓ ＜ＳＲ ｍｉｎ ０ ｍａｘ）の範囲に収まることを表わしている。Ｖ の範囲のＯＣＶを「基準ＯＣＶ」と呼び、ＳＲの範囲のＳＯＣを「基準ＳＯＣ」と呼ぶこととする。Ｒ
【００４５】基準領域の範囲としては、基準ＯＣＶの範囲として０．１Ｖ（Ｏ とＯ の差ｍａｘ ｍｉｎ）、基準ＳＯＣの範囲として３％（Ｓ とＳ の差）が好ましい。ただし、基準 50ｍａｘ ｍｉｎ(16) JP 5948518 B1 2016.7.6領域の範囲は、対象とする蓄電池の特性や、要求される正確性等に応じて、適宜最適化すれば良い。
【００４６】本実施形態における蓄電装置１００は、上記の通り、第１蓄電池１１１と第２蓄電池１２１の間で蓄電池部間充放電を行うことができる。すなわち、一方の蓄電池の電力を他方に移すことができる。すると、蓄電池部間充放電を行うことにより、ＳＯＣ−ＯＣＶカーブを確定させたい側の蓄電池のＯＣＶを、その蓄電池における基準ＯＣＶの範囲に移動させることができる。基準ＯＣＶに対応するＳＯＣは、容量維持率に関わらず基準ＳＯＣであるので、その値を例えばＳ とＳ の平均値とすれば、ＳＯＣ−ＯＣＶの２次ｍｉｎ ｍａｘ元平面（ここでは、「ＳＯ平面」と呼ぶ）上の基準領域に、座標Ｓｐ （Ｓｔ ，Ｏｔ 10０ ０ ０）をプロットすることができる。
【００４７】その後、予め定められた条件、回数にしたがって、蓄電池部間充放電を繰り返す。このとき、例えばＳＯＣ−ＯＣＶカーブを確定させたい側の蓄電池が第１蓄電池１１１である場合には、第１電圧センサ１１２の電圧Ｖ と、第１電流センサ１１３の電流Ｉ を監視１ １することにより、第１蓄電池１１１のＳＯＣの増減分を算出することができる。また、第１スイッチ１１４を開状態にすれば、そのときの第１蓄電池１１１のＯＣＶを検出することもできる。すると、１回の蓄電池部間充放電を行うごとに、ＳＯ平面上に１つの座標Ｓｐをプロットすることができる。図４の例では、基準領域内の座標Ｓｐ を得た後に、蓄０電池部間充放電を３回繰り返し、座標Ｓｐ 、Ｓｐ 、Ｓｐ を得ている。 20１ ２ ３
【００４８】例えば電池メーカーによって、蓄電池の型番ごとに各容量維持率に対するＳＯＣ−ＯＣＶカーブが参照データとして予め準備されている。図４では、１００％、９０％、８０％、７０％、６０％のそれぞれにおけるＳＯＣ−ＯＣＶカーブが参照データである。参照データは、例えば５％刻み、あるいは１％刻みなどの、より細かい割合で準備されていると良い。または、容量維持率に対するＳＯＣ−ＯＣＶカーブの変動が大きい範囲では、小さい範囲より細かい割合で参照データを設けていても良く、データ量および参照データを準備に要する手間を削減できる。蓄電装置１００は、具体的には後述するが、この参照データを記憶部に記憶しており、電池ＥＣＵ１３０は、適宜参照することができる。
【００４９】 30蓄電池部間充放電を繰り返すことにより複数の座標Ｓｐを得たら、電池ＥＣＵ１３０は、これらの座標に対して最も一致度が高い（それぞれの座標の偏差が最も小さい）ＳＯＣ−ＯＣＶカーブを参照データからマッチング処理により選んで確定する。このとき選んで確定したＳＯＣ−ＯＣＶカーブが、その時点における最も確からしいＳＯＣ−ＯＣＶカーブとなる。図４の例においては、容量維持率が９０％のＳＯＣ−ＯＣＶカーブである。このＳＯＣ−ＯＣＶカーブを記憶しておくことにより、外部から要求されるＳＯＣの確認に対して、ＯＣＶを計測すれば即座にその時点における高精度なＳＯＣを返すことができる。このように蓄電池部間充放電を行って適宜確定されるＳＯＣ−ＯＣＶカーブは、その時点における現実のＳＯＣ−ＯＣＶカーブをより忠実に表わしたものとなるので、現実のＳＯＣに対して非常に近いＳＯＣを外部からの確認要求に対して返すことができる。 40
【００５０】なお、上記の説明においては、まず基準領域内に座標Ｓｐ が得られるように蓄電池部０間充放電をおこなったが、座標Ｓｐを得る順番はこれに限らない。複数回の蓄電池部間充放電を行った結果、少なくとも１つの座標Ｓｐが基準領域内に含まれていれば、参照データとマッチング処理を行うことができる。一方の蓄電池のＳＯＣとＯＣＶを基準領域にすべく、過度な蓄電部間充放電を必要とする場合は、複数回の蓄電部間充放電によって、複数の座標を得ながらＳＯＣ−ＯＣＶカーブを生成する蓄電池の電圧とＳＯＣを基準領域に移すことが好ましい。そして、複数回の蓄電部間充放電によって得た座標を基準領域に基づいて修正することで、基準領域にＳＯＣ−ＯＣＶカーブを生成する蓄電部の電圧とＳＯＣを基準領域に属するためだけに、過度の蓄電部間充放電を必要としない、正確なＳＯＣ 50(17) JP 5948518 B1 2016.7.6−ＯＣＶカーブを生成できる。
【００５１】また、上記の説明においては、最も一致度が高いＳＯＣ−ＯＣＶカーブを参照データから選んだが、まずはそれぞれの座標の偏差が閾値以下となる複数のＳＯＣ−ＯＣＶカーブを選び、その中から他の基準に基づいて一つのＳＯＣ−ＯＣＶカーブを確定させても良い。他の基準としては、新しく取得した座標ほど偏差が小さいなどが挙げられる。この様な構成とすることで、何らかの事情によって途中で蓄電部間充放電を停止しなければならい状態でも、ＳＯＣ−ＯＣＶカーブを特定できる。
【００５２】ここで、蓄電池部間充放電をおこなって次の座標Ｓｐを確定させる手順について説明す 10る。図５は、平面空間上で座標を確定させるための演算を説明する図である。一つ目の×印で表わされるＳｐ は、ｎ個目の座標としてＳＯ平面上にプロットされたものであり、ｎ座標値（Ｓｔ ，Ｏｔ ）で表わされる。この後に１回の蓄電池部間充放電を行ってプロｎ ｎットされたｎ＋１個目の座標が、二つ目の×印で表わされるＳｐ である。ｎ＋１
【００５３】それぞれの座標値の差は、ＯＣＶがΔＯＣＶ、ＳＯＣがΔＳＯＣと表わされ、それぞれ正の値の場合もあれば、負の値である場合もある。すなわち、（Ｓｔ ，Ｏｔ ）＝（Ｓｔ ＋ΔＳＯＣ，Ｏｔ ＋ΔＯＣＶ）ｎ＋１ ｎ＋１ ｎ ｎである。ここで、Ｏｔ もＯｔ も、ＯＣＶであるので、これらの値は実測して直ｎ ｎ＋１接得られる。一方ΔＳＯＣは、ΔＳＯＣ＝Ｓｔ −Ｓｔ であり、 20ｎ＋１ ｎΔＳＯＣ＝ΣＩ／Ｃｆｕｌｌあるいは、ΔＳＯＣ＝ΔＡｈ／Ｃｆｕｌｌによって算出される。ここで、ΣＩは、時刻ｔ からｔ までに電流センサが出力ｎ ｎ＋１する値の総和であり、ΔＡｈは、この間に変化した電力量を表わす。また、Ｃ はｆｕｌｌ、前回の特定時点における満充電時の電力量である。Ｃ は、特定されるごとにそｆｕｌｌの値が記憶部に格納される。
【００５４】図６は、座標のプロット順を説明する図である。蓄電池部間で充放電を繰り返す手順は、大きく分けて２つある。一つ目は、図６（ａ）で表わされるように、移動させる電力量 30を少しずつ変えつつ、第１蓄電池１１１→第２蓄電池１２１→第１蓄電池１１１→第２蓄電池→…と、交互に移動させる手順である。このように制御すると、蓄電池へのダメージが少ないＳＯＣ帯域（約３０％〜約７０％）で充放電を繰り返せるので、劣化の進行を抑制することができる。二つ目は、図６（ｂ）で表わされるように、電力の移動を一方向に限る手順である。このように制御すると、蓄電池部間充放電の制御が容易である。
【００５５】以上説明したＳＯＣ−ＯＣＶカーブの確定までを電池ＥＣＵ１３０がどのようにおこなっているのか、電池ＥＣＵ１３０を機能ブロックで表わして説明する。図７は、電池ＥＣＵ１３０の内部ブロック図である。
【００５６】 40図示するように、電池ＥＣＵ１３０は、制御および演算の全体を担う制御演算部２３０を中心として、ΔＳＯＣ算出部２３１、計時部２３２、ＢＡＴＴ情報格納部２３３、確定ライン保持部２３４を有する。これらの機能ブロックによりＳＯＣ−ＯＣＶカーブを確定するまでの処理を行う。この他にも主に、ＳＯＣ応答部２３５、故障判定部２３６を有する。
【００５７】制御演算部２３０は、例えばＭＰＵによって構成され、記憶部に格納されたプログラムに従って蓄電装置１００の全体を制御する。制御演算部２３０は、第１スイッチ１１４、第２スイッチ１２４、第３スイッチ１３３を状況に応じて開閉すべく、開閉指示信号ＣＷ、ＣＷ 、ＣＷ をそれぞれに向けて送信する。また、第１ＶＣＵ１３１，第２ＶＣＵ 50１ ２ ３(18) JP 5948518 B1 2016.7.6１３２の変換電圧を調整すべく、制御信号ＣＶ 、ＣＶ をそれぞれに向けて送信する。１ ２ΔＳＯＣ算出部２３１は、第１蓄電池１１１における座標のプロット時には第１電圧センサ１１２からＯＣＶとしてＶ を取得し、第１電流センサ１１３からＩ を取得して、Δ１ １ＳＯＣを算出する。同様に、第２蓄電池１２１における座標のプロット時には第２電圧センサ１２２からＯＣＶとしてＶ を取得し、第２電流センサ１２３からＩ を取得して、２ ２ΔＳＯＣを算出する。ΔＳＯＣ算出部２３１は、算出したΔＳＯＣを制御演算部２３０へ引き渡す。
【００５８】計時部２３２は、蓄電池部間充放電を行った時刻を制御演算部２３０へ引き渡す。制御演算部２３０は、座標Ｓｐが取得された時刻を記憶しておき、当該座標が予め定められた 10経過時間を過ぎた場合に、マッチング処理の対象から除外する。
【００５９】ＢＡＴＴ情報格納部２３３は、上記の参照データを記憶する記憶部である。具体的には、不揮発性のフラッシュメモリ等により構成される。ＢＡＴＴ情報格納部２３３は、参照データを外部機器から取得する。なお、ＢＡＴＴ情報格納部２３３は、参照データを記憶するに限らず、蓄電池に関する様々な情報を記憶しており、必要に応じて制御演算部２３０へ提供する。
【００６０】確定ライン保持部２３４は、制御演算部２３０が確定したＳＯＣ−ＯＣＶカーブを記憶する記憶部である。具体的には、不揮発性のフラッシュメモリ等により構成される。記憶 20部としてＢＡＴＴ情報格納部２３３と一体的に構成されていても良い。
【００６１】ＳＯＣ応答部２３５は、確定ライン保持部２３４と接続されている。ＳＯＣ応答部２３５は、外部からＳＯＣの問合せを受けると、ＯＣＶとしてＶ 、Ｖ を取得し、確定ライ１ ２ン保持部２３４に記憶されたＳＯＣ−ＯＣＶカーブを参照して、ＳＯＣを返す。
【００６２】故障判定部２３６は、取得された座標Ｓｐの異常性を検証して、蓄電装置１００に故障が発生したか否かを判定する。故障と判定した場合は、外部へ故障信号を発信する。このとき、輸送機器１０は、故障信号に応じた緊急処置を実行する。故障判定については、後に詳述する。 30
【００６３】図８は、ＳＯＣ−ＯＣＶカーブを確定させるまでのフロー図である。フローは、電池ＥＣＵ１３０がＳＯＣ−ＯＣＶカーブを確定させる指示を輸送機器１０の制御部から受け取った時点から開始する。なお、ここでは、第１蓄電池１１１のＳＯＣ−ＯＣＶカーブを確定させる場合について説明する。
【００６４】制御演算部２３０は、ステップＳ１０１において、第１蓄電池１１１のＯＣＶが取得可能か否かを判断する。例えば、ＰＤＵ１４１が電力の供給を要求している場合には、当該要求を優先して第１スイッチ１１４および第３スイッチ１３３を閉状態にするので、ＯＣＶの取得はできないと判断する。この場合は、取得できる状態になるまで待機する。 40
【００６５】ＯＣＶの取得が可能と判断したら、制御演算部２３０は、ステップＳ１０２へ進み、開閉指示信号ＣＷ を第１スイッチ１１４へ送信して開状態とする。そして、第１電圧セン１サ１１２からＶ を取得し、当該電圧値を初期ＯＣＶであるＯｔ とする。制御演算部２１ ０３０は、ステップＳ１０３で、取得したＯｔ が、基準ＯＣＶの範囲に含まれるか否かを０判断する。具体的には、制御演算部２３０は、ＢＡＴＴ情報格納部２３３から第１蓄電池１１１の参照情報を取得し、基準ＯＣＶの範囲Ｏ 〜Ｏ を参照する。そして、ｍｉｎ ｍａｘＯ ≦Ｏｔ ＜Ｏ の関係を満たすか否かを判断する。ｍｉｎ ０ ｍａｘ
【００６６】取得したＯｔ が基準開放電圧の範囲に含まれないと判断したら、ステップＳ１０４へ 50０(19) JP 5948518 B1 2016.7.6進み、制御演算部２３０は、蓄電池部間充放電を実行する。具体的には、制御演算部２３０は、開閉指示信号ＣＷ 、ＣＷ 、ＣＷ をそれぞれのスイッチに向けて送信して、第１ ２ ３１スイッチ１１４と第２スイッチ１２４を閉状態、第３スイッチ１３３を開状態とする。そして、制御信号ＣＶ 、ＣＶ をそれぞれのＶＣＵに向けて送信して、第２ＶＣＵ１３１ ２２の変換電圧値を第１ＶＣＵ１３１の変換電圧値よりも高く設定する。すると、第２蓄電池１２１は放電状態となり、第１蓄電池１１１は充電状態となるので、一定の電力量が第２蓄電池１２１から第１蓄電池１１１へ移動する。制御演算部２３０は、移動させる電力量を、各スイッチの開閉時間を調整したり、各ＶＣＵの変換電圧値を調整したりすることによって変更し得る。また、制御演算部２３０は、取得したＯｔ と基準ＯＣＶの範囲Ｏ０〜Ｏ との差に応じて、移動させる電力量を決定しても良い。 10ｍｉｎ ｍａｘ
【００６７】なお、２つのＶＣＵを用いて蓄電池部間充放電を実行する場合には、一方のＶＣＵのみをＰＷＭ制御し、他方のＶＣＵは直結制御を行っても良い。直結制御は、ＤＣ／ＤＣコンバータのハイサイドスイッチのみを閉状態とし、昇降圧せずに電流を通過させる制御である。直結制御を行う場合に制御信号ＣＶ 、ＣＶ は、変換電圧の指令値として「０」が１ ２指定される。
【００６８】ステップＳ１０４で蓄電池部間充放電が完了すると、再びステップＳ１０１へ戻り、ステップＳ１０３の条件を満たすまで、このループを繰り返す。ステップＳ１０３の条件を満たしたら、ステップＳ１０５へ進む。 20
【００６９】ステップＳ１０５では、制御演算部２３０は、図４を用いて説明したように、ＳＯ平面上にＳＰ をプロットする。そして、ステップＳ１０６で、インクリメント変数ｎに１を０代入する。
【００７０】ステップＳ１０７からは、蓄電池部間充放電を繰り返して座標Ｓｐ を取得する処理でｎある。制御演算部２３０は、ステップＳ１０７で、ＯＣＶの取得が可能か否かを判断する。この判断は、ステップＳ１０１の判断と同様である。ＯＣＶの取得が可能でない場合は、可能となるまで待機する。ＯＣＶの取得が可能であればステップＳ１０８へ進み、制御演算部２３０は、蓄電池部間充放電を実行する。そして、ステップＳ１０９では、第１ス 30イッチ１１４を開状態にして、第１電圧センサ１１２の出力からＯＣＶであるＯｔ を取１得する。続いてステップＳ１１０で、制御演算部２３０は、ΔＳＯＣ算出部２３１にΔＳＯＣを算出させ、図５を用いて説明した手順に従って、ＳＯＣであるＳｔ を算出する。１そして、ステップＳ１１１で、制御演算部２３０は、ＳＯ平面上にＳｐ をプロットする１。なお、このとき、座標Ｓｐ を取得した時刻を計時部２３２から取得し、座標Ｓｐ に１ １関連付けて記憶しておく。この１回のプロット処理が完了したら、ステップＳ１１２で、インクリメント変数ｎを＋１する。
【００７１】制御演算部２３０は、ステップＳ１１３へ進み、繰り返してプロットした座標の数ｎが予め定められた規定数ｎ に達したか否かを判断する。まだ達していないと判断したら、 40０ステップＳ１１４へ進む。
【００７２】ステップＳ１１４は、次の座標Ｓｐ を取得する処理を開始する時点で実行される。スｎテップＳ１１４では、制御演算部２３０は、前回のプロットである座標Ｓｐ の取得ｎ−１時刻から、予め定められた規定時間が経過したか否かを判断する。規定時間は、例えば７日が設定される。規定時間は、走行距離、環境温度、ＳＯＣ−ＯＣＶカーブに要求される精度等に応じて変更し得る。制御演算部２３０は、規定時間が経過していないと判断したら、ステップＳ１０７へ戻り、Ｓｐ ，Ｓｐ 、Ｓｐ …と順次座標を取得する。規定時２ ３ ４間を経過したと判断したら、ステップＳ１０１間で戻る。この場合は、それまで取得したＳＯ平面上のすべての座標Ｓｐを破棄する。このように古い座標Ｓｐを破棄することで、 50(20) JP 5948518 B1 2016.7.6異なる劣化状態で取得された座標ＳｐでＳＯＣ−ＯＣＶカーブが確定されなくなるので、確定されるＳＯＣ−ＯＣＶカーブの精度が向上する。
【００７３】ステップＳ１１３で、繰り返してプロットした座標の数ｎが予め定められた規定数ｎ０に達したと判断したら、ステップＳ１１５へ進み、制御演算部２３０は、取得した複数の座標ＳｐからＳＯＣ−ＯＣＶカーブを確定する。具体的には、制御演算部２３０は、ＢＡＴＴ情報格納部２３３から第１蓄電池１１１の参照データを読み出し、それぞれの容量維持率に対するＳＯＣ−ＯＣＶカーブの中から、取得した複数の座標Ｓｐと最も一致度が高くなるものを選ぶ。そして、このように選んだＳＯＣ−ＯＣＶカーブを確定されたＳＯＣ−ＯＣＶカーブとして、確定ライン保持部２３４へ記憶する。制御演算部２３０は、確定 10したＳＯＣ−ＯＣＶカーブを確定ライン保持部２３４へ記憶したら、一連の処理を終了する。
【００７４】以上のフローにおいては、第１蓄電池１１１のＳＯＣ−ＯＣＶカーブを確定する手順を説明したが、第２蓄電池１２１のＳＯＣ−ＯＣＶカーブを確定する手順も同様である。それぞれの蓄電池のＳＯＣ−ＯＣＶカーブが確定されれば、確定ライン保持部２３４は、２つのＳＯＣ−ＯＣＶカーブが記憶することになる。また、一方の蓄電池のＳＯＣ−ＯＣＶカーブを確定させた後に、他方の蓄電池のＳＯＣ−ＯＣＶカーブを確定させても良いし、蓄電池部間充放電のたびにそれぞれの蓄電池で座標Ｓｐを取得すれば、２つのＳＯＣ−ＯＣＶカーブを並行して確定させることもできる。なお、順に確定させる場合には、高容量 20型バッテリより、高出力型バッテリのＳＯＣ−ＯＣＶカーブを優先的に確定させると良い。また、ＳＯＣ−ＯＣＶカーブの更新頻度も、高出力型バッテリの方を多くすると良い。これは前述したように、高出力型バッテリがＳＯＣに対する劣化影響度の変動が、高容量型バッテリと比べて大きいため、高出力型バッテリの劣化を抑制しつつ充放電を行うためにはより精度の高いＳＯＣ−ＯＣＶカーブを常時有しておく必要があるからである。加えて、その特性上、一定電力を継続的に充放電する高容量型バッテリのＳＯＣは、電流積算法などによっても推定可能だが、大電力の充放電を瞬間的に行う高出力型バッテリは、電流積算法よりもＳＯＣ−ＯＣＶカーブを用いた方が、精度よくＳＯＣを推定可能だからである。
【００７５】 30上記の実施形態おいては、ＯＣＶが基準ＯＣＶに含まれるように調整してＳｐ を取得０したが、ＳＯＣが基準ＳＯＣ含まれるように調整してＳｐ を取得しても良い。この場合０は、ＳＯＣがＳ の範囲（Ｓ 〜Ｓ ）に収まるように、蓄電池部間充放電で移Ｒ ｍｉｎ ｍａｘ動する電力量をＣ に基づいて定めれば良い。ｆｕｌｌ
【００７６】また、上記に実施形態おいては、基準領域に少なくとも一つの座標（Ｓｐ ）が含まれ０るように調整したが、そのような調整を行うことなく、複数の座標Ｓｐを集めて、その座標群に最も一致度が高いＳＯＣ−ＯＣＶカーブを参照データから選択して確定しても良い。この場合は、基準領域にＳｐ が含まれる場合に対して精度は落ちるが、より簡易にＳ０ＯＣ−ＯＣＶカーブを確定させることができる。 40
【００７７】また、上記の実施形態においては、ＢＡＴＴ情報格納部２３３にそれぞれの蓄電池の参照データを記憶させ、この参照データの各ＳＯＣ−ＯＣＶカーブとマッチング処理を行うことにより、現時点におけるＳＯＣ−ＯＣＶカーブを確定させている。しかし、参照データを参照することなく、複数の座標Ｓｐから近似曲線または近似直線を算出し、当該近似曲線または近似直線をＳＯＣ−ＯＣＶカーブとして確定させても良い。参照データにおける各容量維持率のＳＯＣ−ＯＣＶカーブは、例えば電池メーカーが準備する、その型の蓄電池の代表データであるので、信頼性は高い。しかしながら、個々の製品のばらつきまでは対応していないので、そのばらつきは誤差となってしまう。しかし、実測された座標Ｓｐから近似曲線または近似直線を算出すれば、個々のばらつきまで吸収した、生のＳＯＣ 50(21) JP 5948518 B1 2016.7.6−ＯＣＶカーブであると言える。したがって、より精度の高いＳＯＣ−ＯＣＶカーブとして利用できる可能性がある。また、蓄電池の種類によっては、基準領域が存在しない場合もあり得るが、このような場合であっては、実測された座標Ｓｐから算出された近似曲線または近似直線と参照データを併用して、ＳＯＣ−ＯＣＶカーブを確定することができる。具体的には、参照データに含まれる各容量維持率のＳＯＣ−ＯＣＶカーブの中で、実測された座標Ｓｐから算出された近似曲線または近似直線と最も近い形状を有するものを、ＳＯＣ−ＯＣＶカーブとして確定する。
【００７８】参照データからＳＯＣ−ＯＣＶカーブを選択して確定する場合は、容量維持率と対応付けられているので、その時点における蓄電池の劣化進行度合を併せて把握することができ 10る。一方で、実測した座標Ｓｐから近似曲線または近似直線を算出する場合は、精度が上がる期待はあるものの、劣化進行度合は把握できない。したがって、システムが要求する事情に合わせて、ＳＯＣ−ＯＣＶカーブの確定方法を選択できるようにしても良い。また、例えば取得した座標Ｓｐのエラーチェックをおこなうために、両者を併用しても良い。
【００７９】また、上記の実施形態においては、予め定められた座標数が決められた時間以内に取得できない場合は、すべての座標Ｓｐを破棄して最初から処理をしなおす手順を説明した。しかし、古い座標Ｓｐから個別に除外して、マッチング処理に利用する複数の座標Ｓｐを、一定時間以内に取得されたものに限るようにしても良い。また、マッチング処理に利用する座標Ｓｐを選択する基準は、その座標Ｓｐが取得された時刻に限らない。例えば、蓄 20電池部間充放電において、移動させる電力の積算量が予め定められた電力量を超えた場合には、古い座標Ｓｐから順に除外しても良い。この場合、次の積算量は、２番目に古い座標Ｓｐを取得した時点からの積算量に更新する。なお、基準とする電力量は、走行距離、環境温度、ＳＯＣ−ＯＣＶカーブに要求される精度等に応じて変更しても良い。
【００８０】次に、以上のＳＯＣ−ＯＣＶカーブを確定するまでの処理を利用して、蓄電池の故障を検知する手法について説明する。図９は、故障検知の概念を説明する図である。図９は、図３と同じく、横軸は、ＳＯＣをパーセント（％）で表わし、縦軸は、ＯＣＶをボルト（Ｖ）で表わす。
【００８１】 30蓄電池部間充放電を繰り返して取得された複数の座標Ｓｐ は、対象の蓄電池が正常でｎあれば、何れかの容量維持率におけるＳＯＣ−ＯＣＶカーブにおよそ沿うようにプロットされるはずである。しかし、蓄電池部間充放電を繰り返す過程で対象の蓄電池あるいは充放電の相手となる蓄電池に故障が発生すると、その後に取得された座標Ｓｐ の座標値はｘ、ＳＯＣ−ＯＣＶカーブから大きく外れた異常値となり得る。
【００８２】図９においては、座標Ｓｐ の取得から開始し、順に座標Ｓｐ →Ｓｐ →Ｓｐ →Ｓ０ １ ２ ３ｐ と取得した場合を示す。座標Ｓｐ３までは、曲線ＣＬに沿って取得されているものの４、座標Ｓｐ は、曲線ＣＬから大きく外れている。すなわち、座標Ｓｐ の取得から座標４ ３Ｓｐ の取得までの間に、蓄電池に故障が発生した可能性を示唆している。上述のように 40４、各座標は、取得された時刻が計時部２３２によって関連付けられているので、故障が発生した時刻の範囲を限定できる。すると、その限定された時刻範囲における他のセンサの出力を確認することにより、いかなる故障事象が発生したかを推定することが容易となる。
【００８３】故障の判断は、より具体的にはまず、制御演算部２３０は、それまでに取得されている座標Ｓｐ 、Ｓｐ 、Ｓｐ 、Ｓｐ を用いて近似曲線ＣＬを生成して検証用カーブとす０ １ ２ ３る。もし、すでに確定しているＳＯＣ−ＯＣＶカーブが確定ライン保持部２３４に記憶されていれば、そのＳＯＣ−ＯＣＶカーブを検証用カーブとしても良い。そして、制御演算部２３０は、検証用カーブとして決定された近似曲線と、新たに取得された座標Ｓｐ と 50４(22) JP 5948518 B1 2016.7.6の距離ｄを計算する。制御演算部２３０は、その距離が、予め定められた閾値ｄ よりも０大きければ座標Ｓｐ は異常値と認定し、蓄電池に故障が発生したと判断する。４
【００８４】なお、すでに取得した複数の座標Ｓｐ から生成する検証用カーブは、統計手法を用いｎて生成する近似曲線に限らず、簡易的に近似直線であっても良い。近似直線は、それまでに取得された座標間を互いに線分で結ぶ折れ線であっても良い。なお、距離ｄは、検証用カーブに対する偏差であるので、さまざまな統計手法により定義し得る。図９の例では、ＯＣＶ軸に沿う距離をｄとしたが、座標Ｓｐ から検証用カーブに垂直に下ろした足まで４の距離をｄとしても良い。
【００８５】 10次に故障検知の処理フローを説明する。図１０は、故障検知のフロー図である。故障検知の処理フローは、図８を用いて説明したＳＯＣ−ＯＣＶカーブを確定させるまでの処理フローのサブファンクションとして実行される。具体的には、故障検知処理Ｓ２０１は、図８のステップＳ１１１とステップＳ１１２の間に挿入される。
【００８６】制御演算部２３０は、故障検知処理Ｓ２０１を開始すると、ステップＳ２１２で、対象としている蓄電池の確定されたＳＯＣ−ＯＣＶカーブが既に確定ライン保持部２３４に記憶されているか否かを確認する。記憶されていれば、当該ＳＯＣ−ＯＣＶカーブを確定ライン保持部２３４から読み出し、ステップＳ２１３で、検証用カーブに決定する。検証用カーブに決定したらステップＳ２１５へ進む。なお、図８に示すメインのフローでは、対 20象とする蓄電池のＳＯＣ−ＯＣＶカーブを確定しようと処理を行っているが、ここでは故障検知に利用するものであるから、現時点においては多少誤差があるかもしれない過去のＳＯＣ−ＯＣＶカーブであっても利用に供する。
【００８７】制御演算部２３０は、ステップＳ２１２で記憶されていないと確認したら、ステップＳ２１４へ進み、既に取得した複数の座標Ｓｐ から検証用カーブを生成する。検証用カーｎブを生成したらステップＳ２１５へ進む。
【００８８】制御演算部２３０は、ステップＳ２１５で、新たに取得したＳｐ と検証用カーブとのｎ距離ｄを計算し、距離ｄが予め定められた閾値ｄ よりも小さいか否かを判断する。小さ 30０いと判断すれば、蓄電池に故障は発生していないものとして、メインのフローへ戻る。
【００８９】一方、距離ｄが閾値ｄ 以上であれば、制御演算部２３０は、蓄電池に故障が発生して０いると判断し、ステップＳ２１６で、故障信号をシステム側へ送信する。システム側の制御部は、故障信号を受けると割り込み処理により、いち早く故障対応を実行する。この場合は、故障対応を優先させるべく、蓄電装置１００においてＳＯＣ−ＯＣＶカーブを確定させる処理は中断する。
【００９０】以上、本発明を実施の形態を用いて説明したが、本発明の技術的範囲は上記実施の形態に記載の範囲には限定されない。上記実施の形態に、多様な変更または改良を加えること 40が可能であることが当業者に明らかである。その様な変更または改良を加えた形態も本発明の技術的範囲に含まれ得ることが、特許請求の範囲の記載から明らかである。
【００９１】特許請求の範囲、明細書、および図面中において示した装置、システム、プログラム、および方法における動作、手順、ステップ、および段階等の各処理の実行順序は、特段「より前に」、「先立って」等と明示しておらず、また、前の処理の出力を後の処理で用いるのでない限り、任意の順序で実現しうることに留意すべきである。特許請求の範囲、明細書、および図面中の動作フローに関して、便宜上「まず、」、「次に、」等を用いて説明したとしても、この順で実施することが必須であることを意味するものではない。
【符号の説明】 50(23) JP 5948518 B1 2016.7.6
【００９２】１０ 輸送機器、１００ 蓄電装置、１０１ 第１蓄電モジュール、１０２ 第２蓄電モジュール、１０３ 充放電回路モジュール、１１１ 第１蓄電池、１１２ 第１電圧センサ、１１３ 第１電流センサ、１１４ 第１スイッチ、１２１ 第２蓄電池、１２２ 第２電圧センサ、１２３ 第２電流センサ、１２４ 第２スイッチ、１３０ 電池ＥＣＵ、１３１ 第１ＶＣＵ、１３２ 第２ＶＣＵ、１３３ 第３スイッチ、１４２ 第３電圧センサ、１４１ ＰＤＵ、１５１ 充電コンバータ、１５２ 受電部、１５３ 外部電源、２３０ 制御演算部、２３１ ΔＳＯＣ算出部、２３２ 計時部、２３３ ＢＡＴＴ情報格納部、２３４ 確定ライン保持部、２３５ ＳＯＣ応答部、２３６ 故障判定部
【要約】 10
【課題】蓄電池が故障すると、例えば当該蓄電池が輸送機器に利用されているような場合には、装置全体にフェールセーフアクションが必要となるような影響を与える。したがって、蓄電池の故障は、いち早く認識される必要がある。
【解決手段】第１蓄電部と第２蓄電部の間の充放電である蓄電部間の電力移動の前後における第１蓄電部のＯＣＶと、電力移動の充放電量を用いて、第１蓄電部のＳＯＣとＯＣＶからなる二次元平面における座標を複数特定することによって、第１蓄電部のＳＯＣとＯＣＶの関係である第１相関情報を確定する段階で、特定された座標が、それまでに特定された他の座標によって形成される近似曲線または近似直線から予め定めた量を超えて乖離する場合、第１蓄電部の故障状態と診断することを特徴とする。
【選択図】図９ 20
【図１】 
【図２】(24) JP 5948518 B1 2016.7.6
【図３】 
【図４】
【図５】 
【図６】(25) JP 5948518 B1 2016.7.6
【図７】 
【図８】
【図９】 
【図１０】(26) JP 5948518 B1 2016.7.6フロントページの続き(56)参考文献 特開２００８−２２００８０（ＪＰ，Ａ）特開２０１４−１３４３９１（ＪＰ，Ａ）特開２０１５−２１５２７２（ＪＰ，Ａ）特開２０１３−１８７９６０（ＪＰ，Ａ）特開２０１１−０４７９１８（ＪＰ，Ａ）特開２０１５−０６１３６９（ＪＰ，Ａ）特開２０１３−０２４７２５（ＪＰ，Ａ）国際公開第２０１１／０９００２０（ＷＯ，Ａ１） 10特開２０１４−００７８２１（ＪＰ，Ａ）国際公開第２０１４／１５６５６４（ＷＯ，Ａ１）特開２００３−０９２８０５（ＪＰ，Ａ）特開２００３−３４４０９６（ＪＰ，Ａ）特開２０１４−１９６９８５（ＪＰ，Ａ）(58)調査した分野(Int.Cl.，ＤＢ名)Ｇ０１Ｒ ３１／３６Ｈ０１Ｍ １０／４８Ｈ０２Ｊ ７／００ 20']